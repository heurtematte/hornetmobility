YUI.add("hornet-filtre",function(c){var u=c.Node,d=c.Widget,i=c.ClassNameManager.getClassName,l=c.Node.create,j=c.substitute,p=c.Lang.isString,a=c.Lang.isBoolean,q=c.Lang.isNumber,f=c.Lang.isArray,n=c.Lang.isValue,v="boundingBox",m="contentBox",t="strings",h="active",r="visible",s="hidden",e="click",b="button",g="Filtre",k="filtre";var o=function(){o.superclass.constructor.apply(this,arguments);};o.CLASS_NAMES={inputFields:i(k,"field"),buttonsHeader:i(k,"buttons","hd"),buttonsFooter:i(k,"buttons","ft"),cancelButton:i(k,b,"cancel"),submitButton:i(k,b,"submit"),closeButton:i(k,b,"close"),showButton:i(k,b,"show"),showButtonHidden:i(k,b,"show",s),showButtonVisible:i(k,b,"show",r),showButtonActive:i(k,b,"show",h)};o.NAME=g;o.HTML_PARSER={buttonsHeader:"."+o.CLASS_NAMES.buttonsHeader,buttonsFooter:"."+o.CLASS_NAMES.buttonsFooter,cancelButton:"."+o.CLASS_NAMES.cancelButton,submitButton:"."+o.CLASS_NAMES.submitButton,closeButton:"."+o.CLASS_NAMES.closeButton,showButton:"."+o.CLASS_NAMES.showButton,inputFields:["input."+o.CLASS_NAMES.inputFields+",."+o.CLASS_NAMES.inputFields+" input"],icon:function(x){var w=x.one("."+o.CLASS_NAMES.showButton+" img");return(w)?w.get("src"):null;},iconActive:function(x){var w=x.one("."+o.CLASS_NAMES.showButton+" img");return(w)?w.get("src"):null;}};o.ATTRS={strings:{valueFn:function(){return c.Intl.get("hornet-filtre");}},buttonsHeader:{writeOnce:true,setter:function(x){var w=c.one(x);if(w){return w;}else{return c.Attribute.INVALID_VALUE;}}},buttonsFooter:{writeOnce:true,setter:function(x){var w=c.one(x);if(w){return w;}else{return c.Attribute.INVALID_VALUE;}}},cancelButton:{writeOnce:true,setter:function(x){var w=c.one(x);if(w){return w;}else{return c.Attribute.INVALID_VALUE;}}},submitButton:{writeOnce:true},closeButton:{writeOnce:true},showButton:{writeOnce:true,setter:function(x){var w=c.one(x);if(w){return w;}else{return c.Attribute.INVALID_VALUE;}}},inputFields:{writeOnce:true},active:{value:false,validator:a},icon:{validator:p},iconActive:{validator:p}};c.extend(o,c.Widget,{TEMPLATES:{icon:"<a title='{text}' class='icone' href='{href}'>{value}</a>",img:"<img src='{src}' alt='{text}'/>",button:"<span class='yui-button'><span class='first-child'><button type='button'>{text}</button></span>"},initializer:function(w){this.publish("update",{defaultFn:this._defUpdateFn,bubbles:false});this.fire("update");},destructor:function(){},renderUI:function(){this._renderCloseButton();this._renderShowButton();},bindUI:function(){var x=this.get("closeButton"),w=this.get("showButton"),z=this.get("cancelButton"),y=this.get("submitButton");if(x){c.on(e,c.bind(this._onCloseButtonClick,this),x);}if(w){c.on(e,c.bind(this._onShowButtonClick,this),w);}if(z){c.on(e,c.bind(this._onCancelButtonClick,this),z);}if(y){c.on(e,c.bind(this._onSubmitButtonClick,this),y);}this.after("activeChange",c.bind(this._afterActiveChange,this));this.after("visibleChange",c.bind(this._afterVisibleChange,this));},syncUI:function(){this._uiFiltreSetActive(this.get(h));this._uiFiltreSetVisible(this.get(r));},reset:function(){var w=this.get("inputFields");if(w){w.each(function(x){if(x.get("type")=="checkbox"){x.set("checked",false);}else{if(x.get("type")=="text"){x.set("value","");}}});}this.fire("update");this.syncUI();},_renderShowButton:function(){var y=this.get("buttonsHeader"),x=this.get("showButton"),z=this.get("icon"),w=this.get(t),A;if(!x&&!!y){if(!!z){A=j(this.TEMPLATES.img,{src:z,text:w.show});}else{A=w.show;}x=this._createIcon(w.show,A,"",["icone","filtrer",o.CLASS_NAMES.showButton]);y.appendChild(x);this.set("showButton",x);}},_renderCloseButton:function(){var y=this.get(m),x=this.get("buttonsFooter"),z=this.get("closeButton"),w=this.get(t);if(!z){z=this._createButton(w.hide,o.CLASS_NAMES.closeButton);if(!!x){x.appendChild(z);}else{y.appendChild(z);}this.set("closeButton",z);}},_createIcon:function(C,A,w,B){var y,z,x;y=j(this.TEMPLATES.icon,{href:w||"#",text:C,value:A});z=l(y);x=c.Array(B);c.Array.each(x,z.addClass,z);return z;},_createButton:function(y,x){var w=j(this.TEMPLATES.button,{className:x,text:y});return l(w);},_updateActivityState:function(){var x=this.get("inputFields"),w=0;if(x){x.each(function(y){if(y.get("type")==="checkbox"&&y.get("checked")===true){w++;}else{if(y.get("type")==="text"&&!!(y.get("value"))){w++;}}});}this.set(h,(w>0));},_updateButtonActivityClasses:function(){var x=this.get(h),w=this.get("showButton");if(w){if(!!x){w.addClass(o.CLASS_NAMES.showButtonActive);}else{w.removeClass(o.CLASS_NAMES.showButtonActive);}}},_updateShowButtonText:function(){var A=this.get(h),B=this.get(r),x=this.get("showButton"),w=this.get(t),y,z;if(!!B){if(!!A){z=w.hideActive;}else{z=w.hide;}}else{if(!!A){z=w.showActive;}else{z=w.show;}}if(!!x){x.set("title",z);y=x.one("img");if(!!y){y.set("alt",z);}else{x.set("innerHTML",z);}}},_updateShowButtonVisibilityClasses:function(){var x=this.get(r),w=this.get("showButton");if(w){if(!!x){w.removeClass(o.CLASS_NAMES.showButtonHidden);w.addClass(o.CLASS_NAMES.showButtonVisible);}else{w.addClass(o.CLASS_NAMES.showButtonHidden);w.removeClass(o.CLASS_NAMES.showButtonVisible);}}},_updateShowButtonActivityImage:function(){var A=this.get(h),w=this.get("showButton"),y=this.get("icon"),z=this.get("iconActive"),x;if(!!w){x=w.one("img");if(!!x&&!!z&&!!y){if(!!A){x.set("src",z);}else{x.set("src",y);}}}},_updateCloseButtonActivityText:function(){var A=this.get(h),x=this.get("closeButton"),w=this.get(t),y,z;if(!!A){z=w.hideActive;}else{z=w.hide;}if(!!x){y=x.one("button");if(!!y){y.set("innerHTML",z);}else{x.set("innerHTML",z);}}},_afterVisibleChange:function(w){this._uiFiltreSetVisible(w.newVal);},_uiFiltreSetVisible:function(w){this._updateShowButtonVisibilityClasses();this._updateShowButtonText();},_afterActiveChange:function(w){this._uiFiltreSetActive(w.newVal);},_uiFiltreSetActive:function(w){this._updateButtonActivityClasses();this._updateShowButtonText();this._updateShowButtonActivityImage();this._updateCloseButtonActivityText();},_defUpdateFn:function(w){this._updateActivityState();
},_onShowButtonClick:function(w){w.halt(true);if(this.get(r)){this.hide();}else{this.show();}},_onCloseButtonClick:function(w){this.hide();},_onSubmitButtonClick:function(w){this.fire("update");},_onCancelButtonClick:function(w){this.reset();this.hide();}});c.namespace("hornet").filtre=o;},"3.3.0",{requires:["widget-base","widget-htmlparser","substitute"],lang:["fr"],skinnable:true});
