YUI.add("hornet-pagintable",function(c){var a="",b={createPagination:function(d,e){e=e||{};var h=c.YUI2,g=c.Intl.get("hornet-pagintable"),f=c.merge({firstPageLinkLabel:g.firstPageLinkLabel,firstPageLinkTitle:g.firstPageLinkTitle,lastPageLinkLabel:g.lastPageLinkLabel,lastPageLinkTitle:g.lastPageLinkTitle,previousPageLinkLabel:g.previousPageLinkLabel,previousPageLinkTitle:g.previousPageLinkTitle,nextPageLinkLabel:g.nextPageLinkLabel,nextPageLinkTitle:g.nextPageLinkTitle,pageTitleBuilder:function(i,j){return g.pageTitle+i;},rowsPerPage:d},e);return new h.widget.Paginator(f);},createTable:function(d,j,i,e){e=e||{};var h=c.YUI2,g=c.Intl.get("hornet-pagintable"),f=c.merge({MSG_EMPTY:g.MSG_EMPTY,MSG_ERROR:g.MSG_ERROR,MSG_LOADING:g.MSG_LOADING,MSG_SORTASC:g.MSG_SORTASC,MSG_SORTDESC:g.MSG_SORTDESC,caption:a},e);return new h.widget.DataTable(d,j,i,f);},createDatasource:function(g,j,d,f,e){f=f||{};var i=c.YUI2;var h=new i.hornet.HijaxDataSource(g,null,{domNode:f.table,columnToFieldName:j,xhrparam:"mode=XML"});h.responseType=i.util.XHRDataSource.TYPE_XML;h.connMethodPost=true;h.useXPath=true;h.responseSchema={resultNode:d,fields:j,metaFields:{resultat:"//RESULTAT",totalRecords:"//totalItems",initialPage:"//indexPage"}};h.doBeforeCallback=function(n,l,o,k){var m=o||{};if(!!this.firstresponse){m.meta.resultat="OK";m.meta.totalRecords=f.totalRecords;m.meta.initialPage=f.initialPage;}else{if(!!l){m=b.checkMessagesBeforeCallback(l,m,e);}}return m;};return h;},checkMessagesBeforeCallback:function(m,n,g){g=g||{};var f=n||{},l=new c.hornet.Notification(g),d=false,k=[],h=[],j=null;if(!!m){try{j=c.hornet.Ajax.parseResponseXML(m);}catch(i){}if(!j||j.error){d=true;}else{if(j.result!="OK"){d=true;}k=j.errors;h=j.messages;l.writeInfos(h);}if(d){f.error=true;if(g.alertOnError){alert(g.alertOnError);}l.writeErrors(k);}}return f;},createServerTable:function(e,j,i,f){f=f||{};var h=c.YUI2;var g=function(m,p){m=m||{pagination:null,sortedBy:null};var o=encodeURIComponent((m.sortedBy)?m.sortedBy.key:""),l=(m.sortedBy&&m.sortedBy.dir===h.widget.DataTable.CLASS_DESC)?"DESC":"ASC",k=(m.pagination)?m.pagination.recordOffset:0,n=(m.pagination)?m.pagination.rowsPerPage:10,r=1;tableName=f.tableName||tableName;var q=[];if(m.sortedBy){q.push("tablesStates['"+tableName+"'].sort.key="+o);q.push("tablesStates['"+tableName+"'].sort.dir="+l);}if(m.pagination){r=Math.ceil(k/n)+1;q.push("tablesStates['"+tableName+"'].pagination.pageIndex="+r);}return q.join("&");};if(f.dynamicData){f.generateRequest=f.generateRequest||g;f.initialRequest=f.initialRequest||f.generateRequest();}var d=b.createTable(e,j,i,f);d.doBeforeLoadData=function(n,l,p){p=p||{};var o=l.meta||{};var k=(parseInt(o.recordOffset,10)||(p.pagination)?p.pagination.recordOffset:0),m=(parseInt(o.rowsPerPage,10)||(p.pagination)?p.pagination.rowsPerPage:10);if(o.initialPage){k=(parseInt(o.initialPage,10)-1)*m;}p.totalRecords=parseInt(o.totalRecords,10)||p.totalRecords;p.pagination={rowsPerPage:(m||10),recordOffset:(k||0)};return true;};d.handleDataReturnPayload=function(l,k,m){m=m||{};return m;};return d;}};c.namespace("hornet").PaginTable=b;},"3.3.0",{requires:["intl","yui2-paginator","yui2-datatable","hornet-hijaxdatasource","hornet-ajax","hornet-notification"],skinnable:false,lang:["fr"]});
